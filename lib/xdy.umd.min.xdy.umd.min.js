(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["xdy"]=t():e["xdy"]=t()})("undefined"!==typeof self?self:this,(function(){return(("undefined"!==typeof self?self:this)["webpackJsonpxdy"]=("undefined"!==typeof self?self:this)["webpackJsonpxdy"]||[]).push([[2],{"1d82":function(e,t,n){},2414:function(e,t,n){"use strict";n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return k}));n("d81d"),n("b0c0");var i,a,o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"base-page"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.search.form,expression:"search.form"}],staticClass:"search"},[n("form-create",{attrs:{option:e.option,rule:e.search.form},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}}),n("el-button",{attrs:{icon:"el-icon-search",type:"main",size:"mini"},on:{click:e.onSearch}},[e._v("搜索")]),n("el-button",{attrs:{size:"mini",icon:"el-icon-setting"},on:{click:function(t){e.form={}}}},[e._v("重置")])],1),n("div",{staticClass:"table"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.search.button,expression:"search.button"}],staticClass:"button"},[n("el-form",[n("el-form-item",e._l(e.search.button,(function(t){return n("el-button",{key:t.label,attrs:{type:t.type||"main",icon:e.setIcon(t),size:"mini"},on:{click:t.func}},[e._v(e._s(t.label))])})),1)],1)],1),n("Table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",data:e.tableData,columns:e.columns,operation:e.operation,multiple:e.multiple,refreshTable:e.getData,props:e.props},on:{selectChange:e.selectChange}}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isPagination,expression:"isPagination"}],staticClass:"pagination"},[n("el-pagination",{attrs:{"current-page":e.pagination.currentPage,"page-sizes":[10,20,30],layout:"total, sizes, prev, pager, next, jumper",total:e.pagination.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])},r=[],s=(n("caad"),n("2532"),n("5530")),l=(n("4de4"),{props:{data:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},operation:{type:Object,default:function(){}},multiple:{type:Boolean,default:function(){return!1}},refreshTable:{type:Function,default:function(){}},props:{type:Object}},data:function(){return{currentPage:10,multipleSelection:[]}},watch:{},methods:{handleSelectionChange:function(e){this.$emit("selectChange",e)},handleDel:function(e,t){var n=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e({id:t}).then((function(e){e&&e.status&&(n.refreshTable(),n.$message({message:"删除成功！",type:"success"}))}))})).catch((function(){n.$message({type:"danger",message:"已取消删除"})}))},renderColumn:function(e,t,n){return t.formatter?t.formatter(e,n):n[t.key]},renderOperation:function(e,t){var n=this;return e("div",{class:"operation"},[this.operation1.map((function(i){return n.setOperation(e,i,t)})),this.operation2.length>0?e("el-dropdown",{style:{marginLeft:"10px"}},[e("el-button",{attrs:{type:"main",size:"mini"}},["更多",e("i",{class:"el-icon-arrow-down el-icon--right"})]),e("el-dropdown-menu",{slot:"dropdown"},[this.operation2.map((function(i){return e("el-dropdown-item",{style:{textAlign:"center"}},[n.setOperation(e,i,t)])}))])]):""])},setOperation:function(e,t,n){var i,a=this;return i=t.icon?t.icon:t.label.includes("编辑")?"el-icon-edit-outline":t.label.includes("删除")?"el-icon-delete":"el-icon-s-operation",e("el-button",{attrs:{disabled:t.disabled&&t.disabled(n),icon:i,size:"mini",type:t.type||"main"},on:{click:function(){return"删除"===t.label?a.handleDel(t.func,n.id):t.func(n)}}},[t.formatter?t.formatter(e,n):t.label])}},created:function(){},computed:{operation1:function(){return this.operation.button.filter((function(e,t){return t<2}))},operation2:function(){return this.operation.button.filter((function(e,t){return t>=2}))}},render:function(e){var t=this;return e("el-table",{ref:"table",attrs:{data:this.data,stripe:!0,"row-key":this.props.rowKey||"id","tree-props":this.props.treeProps||{children:"children",hasChildren:"hasChildren"},"header-cell-style":this.props.headerStyle||{background:"#e5e5e5",color:"#666"},"selection-change":this.handleSelectionChange},style:this.props.style},[this.multiple?e("el-table-column",{attrs:{type:"selection"}}):"",this.columns.map((function(n){return e("el-table-column",{key:n.key,attrs:{prop:n.key,label:n.label,width:n.width,"show-overflow-tooltip":!0,formatter:function(i){return t.renderColumn(e,n,i)}}})})),this.operation?e("el-table-column",{attrs:{label:"操作",width:this.operation.width||"200px",formatter:function(n){return t.renderOperation(e,n)}}}):""])}}),c=l,u=(n("3038"),n("2877")),d=Object(u["a"])(c,i,a,!1,null,"4404977f",null),p=d.exports,f={name:"x-table",components:{Table:p},props:{columns:{type:Array,default:function(){return[]}},operation:{type:Object,default:function(){}},search:{type:Object,default:function(){return{button:[],form:[]}}},dataFunc:{type:Function,default:function(){return function(){}}},multiple:{type:Boolean,default:!1},isPagination:{type:Boolean,default:!0},props:{type:Object}},data:function(){return{tableData:[],form:{},currentPage:10,pagination:{},curPage:1,pageSize:10,loading:!0,option:{form:{inline:!0,size:"mini"},submitBtn:{show:!1}}}},created:function(){this.getData({pageSize:this.pageSize,curPage:this.curPage})},methods:{selectChange:function(e){this.$emit("selectChange",e)},onSearch:function(){var e=this;this.form.submit((function(t){e.getData(Object(s["a"])(Object(s["a"])({},t),{},{pageSize:e.pageSize,curPage:e.curPage}))}))},handleSizeChange:function(e){this.pageSize=e,this.getData(Object(s["a"])(Object(s["a"])({},this.form),{},{pageSize:this.pageSize,curPage:this.curPage}))},handleCurrentChange:function(e){this.curPage=e,this.getData(Object(s["a"])(Object(s["a"])({},this.form),{},{pageSize:this.pageSize,curPage:this.curPage}))},getData:function(e){var t=this;this.loading=!0,this.dataFunc(e).then((function(e){e.list&&(t.tableData=e.list,t.pagination={total:e.total,pageSize:e.pageSize,currentPage:e.curPage}),t.loading=!1})).catch((function(e){return t.loading=!1}))},setIcon:function(e){var t;return t=e.label.includes("新增")?"el-icon-plus":"el-icon-s-operation",t}}},h=f,m=(n("80fc"),Object(u["a"])(h,o,r,!1,null,"e9a5421c",null)),g=m.exports;g.install=function(e){e.component(g.name,g)};var b=g,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:e.deProps.diaTitle,visible:e.dialogFormVisible,"close-on-click-modal":!1,width:e.deProps.diaWidth},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("form-create",{attrs:{option:e.option,rule:e.rule},on:{"on-submit":e.handleSubmit,change:e.handleChange},model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})],1)},v=[],w={name:"x-edit",props:{rule:{type:Array,default:[]},submitFunc:{type:Function,require:!0},props:{type:Object,default:function(){}}},components:{},data:function(){return{dialogFormVisible:!1,form:{},editId:"",deProps:null,option:{}}},created:function(){this.initProps()},methods:{initProps:function(){var e={diaWidth:"50%",diaTitle:"编辑",labelWidth:"150px",labelPosition:"left",disabled:!1,global:{"*":{}},submitBtn:{type:"primary"}};this.deProps=Object(s["a"])(Object(s["a"])({},e),this.props),this.option={form:{inline:!1,labelPosition:this.deProps.labelPosition||"left",labelSuffix:void 0,hideRequiredAsterisk:!1,labelWidth:this.deProps.labelWidth||"150px",showMessage:!0,inlineMessage:!1,statusIcon:!1,validateOnRuleChange:!0,disabled:this.deProps.disabled||!1,size:"medium"},global:this.deProps.global||{"*":{}},submitBtn:this.deProps.submitBtn||{type:"primary"}}},handleChange:function(e,t,n){this.$emit("handleChange",n)},handleOpen:function(e){var t=this;this.dialogFormVisible=!0,this.$nextTick((function(){t.form&&e&&(t.editId=e.id,t.form.setValue(e),t.$emit("handleChange",t.form))}))},handleSubmit:function(e){var t=this;for(var n in this.form.submitBtnProps({loading:!0}),e)e[n]||0===e[n]||delete e[n];this.editId&&(e.id=this.editId),this.$emit("beforeSubmit",e),console.log("params",e),this.submitFunc(e).then((function(e){e&&(t.$emit("afterSubmit",e),t.$message({type:"success",message:"操作成功！"}),t.dialogFormVisible=!1),t.form.submitBtnProps({loading:!1})})).catch((function(e){t.dialogFormVisible=!1,t.form.submitBtnProps({loading:!1})}))}}},P=w,x=Object(u["a"])(P,y,v,!1,null,"931ebc1e",null),C=x.exports;C.install=function(e){e.component(C.name,C)};var S=C,z=[b,S],O={install:function(e){return z.map((function(t){return e.component(t.name,t)}))}};"undefined"!==typeof window&&window.Vue&&O.install(window.Vue);var j=b,k=S;t["a"]=O},3038:function(e,t,n){"use strict";var i=n("e5f0"),a=n.n(i);a.a},"80fc":function(e,t,n){"use strict";var i=n("1d82"),a=n.n(i);a.a},e5f0:function(e,t,n){}},[["fb15",1,0]]])}));